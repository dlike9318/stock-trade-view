# 华为云FunctionGraph函数计算部署方案

## 部署架构

```
华为云FunctionGraph
├── API网关触发器 → 函数计算 → 返回股票数据
└── 定时触发器 → 函数计算 → 更新股票数据
```

## 需要创建的文件

### 1. 函数入口文件 `backend/huawei/index.js`
- 适配华为云函数计算的事件格式
- 处理API网关请求
- 返回正确的响应格式

### 2. 函数配置文件 `backend/huawei/fzg.yaml`
- 函数名称、内存、超时配置
- 触发器配置

### 3. 部署脚本 `backend/huawei/deploy.sh`
- 打包函数代码
- 上传到华为云

## 代码改造要点

1. **请求处理**：适配API网关事件格式
2. **响应格式**：返回API网关要求的响应格式
3. **WebSocket**：函数计算不支持WebSocket，需要改用HTTP轮询

## 部署步骤

1. 创建华为云账号并开通FunctionGraph
2. 创建函数和API网关触发器
3. 上传代码
4. 配置环境变量
5. 测试API

## 文件结构

```
backend/
├── huawei/              # 华为云函数计算专用
│   ├── index.js         # 函数入口
│   ├── package.json     # 依赖配置
│   └── fzg.yaml         # 函数配置
├── services/            # 业务逻辑（共用）
│   └── stockDataService.js
└── index.js             # 原Express入口（保留）
```